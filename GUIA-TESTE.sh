#!/bin/bash

# ğŸ¯ GUIA PRÃTICO: Testando a SincronizaÃ§Ã£o de Dados

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  TESTE PRÃTICO: SINCRONIZAÃ‡ÃƒO DE DADOS ENTRE DISPOSITIVOS  â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Cores para melhor visualizaÃ§Ã£o
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

echo -e "${BLUE}ğŸ“‹ PASSO 1: Preparar o Ambiente${NC}"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "1.1) Abra DOIS terminais diferentes:"
echo ""
echo -e "  Terminal 1 (Backend):"
echo "  $ cd /Users/henriquecesararaujoferreira/Desktop/Cadastro/server"
echo "  $ npm run dev"
echo ""
echo -e "  Terminal 2 (Frontend):"
echo "  $ cd /Users/henriquecesararaujoferreira/Desktop/Cadastro"
echo "  $ npm run dev"
echo ""
echo "1.2) Aguarde atÃ© aparecer:"
echo "  âœ“ 'Servidor AAFAB rodando na porta 3001'"
echo "  âœ“ 'VITE v... ready in ... ms'"
echo ""

echo -e "${BLUE}ğŸ“‹ PASSO 2: Teste no COMPUTADOR${NC}"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "2.1) Abra o navegador: http://localhost:3000"
echo ""
echo "2.2) FaÃ§a o cadastro:"
echo "  â€¢ CPF: Qualquer CPF vÃ¡lido (ex: 12345678901)"
echo "  â€¢ Nome: Seu nome completo"
echo "  â€¢ Email: seu@email.com"
echo "  â€¢ Preencha os outros campos"
echo "  â€¢ Marque o termo de consentimento"
echo "  â€¢ Clique em ENVIAR"
echo ""
echo "2.3) Veja a mensagem:"
echo "  âœ… 'Cadastro enviado com sucesso!'"
echo ""
echo "2.4) Clique em ABRIR PAINEL e veja:"
echo "  âœ… Seus dados aparecem no painel admin"
echo ""

echo -e "${BLUE}ğŸ“‹ PASSO 3: Teste no CELULAR${NC}"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "3.1) Descubra o IP do seu Mac:"
echo "  $ ifconfig | grep 'inet ' | grep -v 127"
echo ""
echo "  Vai aparecer algo como: inet 192.168.1.100"
echo ""
echo "3.2) No celular, acesse:"
echo "  http://192.168.1.100:3000"
echo ""
echo "3.3) Clique no botÃ£o 'Admin' no topo"
echo ""
echo "3.4) Digite a senha:"
echo "  ${GREEN}AAFAB@2026#Secure!${NC}"
echo ""
echo "3.5) Clique em 'Painel Admin'"
echo ""
echo "3.6) ğŸ‰ RESULTADO ESPERADO:"
echo "  ${GREEN}âœ… VER SEU CADASTRO QUE FOI FEITO NO COMPUTADOR${NC}"
echo ""
echo "  Mesmo que nunca tenha se cadastrado no celular!"
echo ""

echo -e "${BLUE}ğŸ“‹ PASSO 4: Verificar SincronizaÃ§Ã£o${NC}"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "4.1) No computador, abra o console (F12)"
echo ""
echo "4.2) Procure por mensagens como:"
echo "  âœ“ 'Erro ao conectar ao backend: ...' (normal em mobile)"
echo "  âœ“ 'Listagem de cadastros acessada'"
echo ""
echo "4.3) Acesse o Neon Console para confirmar:"
echo "  https://console.neon.tech"
echo ""
echo "  Veja a tabela 'Cadastro' com seus dados"
echo ""

echo -e "${BLUE}ğŸ“‹ PASSO 5: Teste de Erro (Esperado)${NC}"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "5.1) Se fechar o terminal do Backend:"
echo "  â€¢ Computador: Mostra erro de conexÃ£o âœ“ (esperado)"
echo "  â€¢ Celular: Continua mostrando dados do localStorage âœ“"
echo ""
echo "5.2) Isso prova que o offline-first funciona!"
echo ""

echo -e "${GREEN}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo -e "${GREEN}âœ… SOLUÃ‡ÃƒO PRONTA PARA USAR!${NC}"
echo -e "${GREEN}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo ""
echo "ğŸ¯ O que foi corrigido:"
echo "  âœ… Dados salvos no Neon (banco de dados na nuvem)"
echo "  âœ… Sincronizados entre dispositivos"
echo "  âœ… AcessÃ­vel de celular e computador"
echo "  âœ… Funciona offline com cache local"
echo "  âœ… SeguranÃ§a com autenticaÃ§Ã£o JWT"
echo ""
echo "ğŸ“ Se tiver problemas:"
echo "  1) Verifique se backend estÃ¡ rodando (porta 3001)"
echo "  2) Verifique se frontend estÃ¡ rodando (porta 3000)"
echo "  3) Limpe o cache do navegador (Ctrl+Shift+Del)"
echo "  4) Recarregue a pÃ¡gina (F5)"
echo ""
